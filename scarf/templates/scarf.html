{% extends "layout.html" %}

{% block body %}

{% include "login.html" %}

<div id="content">

<p>
<div id="itemname">
<h1>{{ pd.item.name }}</h1><br />
</div>

{% if pd.authuser is not undefined %}
<div id="itemactions">
{% if pd.authuser.collection is defined %}

{% if pd.iteminfo.have == 0 %}
<a href="/scarf/{{ pd.item.name }}/have">I own this</a></br>

{% else %}
This is in your collection. <a href="/scarf/{{ pd.item.name }}/donthave">Remove it</a>.<br />

{% if pd.iteminfo.willtrade == 0 %}
<a href="/scarf/{{ pd.item.name }}/willtrade">I'll trade this</a>
{% else %}
This is up for trade. <a href="/scarf/{{ pd.item.name }}/wonttrade">Nevermind</a>.<br />
{% endif %}

{% endif %}

{% if pd.iteminfo.want == 0 %}
<a href="/scarf/{{ pd.item.name }}/want">I want this</a></br>
{% else %}
You want this. <a href="/scarf/{{ pd.item.name }}/dontwant">Nevermind.</a><br />
{% endif %}

{% else %}

<a href="/scarf/{{ pd.item.name }}/have">I own this</a>
<a href="/scarf/{{ pd.item.name }}/willtrade">I'll trade this</a>
<a href="/scarf/{{ pd.item.name }}/want">I want this</a>

{% endif %}

{% if pd.authuser.accesslevel == 255 %}
<a href="/scarf/{{ pd.item.name }}/delete">Delete scarf</a>
{% endif %}

</div>
{% endif %}

<div id="description">
{{ pd.item.description }}<br />
</div>

<br>
<div id="scarfimg">
{% for image in pd.item.images %}
    <a href="/static/uploads/{{ image.filename }}"><img src="/image/{{ image.filename }}/thumbnail" alt="{{ image.tag }}"></a><br />

{% if pd.authuser is defined and pd.authuser.accesslevel >= 10 %}
<a href="/image/{{ image.uid }}/delete">Delete image</a>
{% endif %}

{% endfor %}

{% if pd.authuser is not undefined %}
    <form action="/image/upload" method="post" enctype="multipart/form-data">
        Tag: <input type=text name=tag><br />
        <input type="file" name="image" accept="image/*"><br />
        <input type="hidden" name="scarfname" value="{{ pd.item.name }}">
        <input type=submit value=Submit>
    </form>
{% endif %}
</p>
</div>

<div class="havecount">
{% if pd.item.have == 1 %}
1 person has this<br />
{% else %}
{{ pd.item.have }} people have this<br />
{% endif %}

{% for user in pd.item.haveusers %}
<a href="/user/{{ user.username }}">{{ user.username }}</a><br />
{% endfor %}
</div>

<div class="willtradecount">
{% if pd.item.willtrade == 1 %}
1 person is willing to trade this <br />
{% else %}
{{ pd.item.willtrade }} people are willing to trade this <br />
{% endif %}

{% for user in pd.item.willtradeusers %}
<a href="/user/{{ user.username }}">{{ user.username }}</a><br />
{% endfor %}

</div>

<div class="wantscount">
{% if pd.item.want == 1 %}
1 person wants to trade for this <br />
{% else %}
{{ pd.item.want }} people want to trade for this <br />
{% endif %}

{% for user in pd.item.wantusers %}
<a href="/user/{{ user.username }}">{{ user.username }}</a><br />
{% endfor %}



</div>
</div>

{% endblock %}
